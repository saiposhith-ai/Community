<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Admin Panel{% endblock %}</title>
    <link
      rel="shortcut icon"
      href="{{ url_for('static', filename='favicon.ico') }}"
      type="image/x-icon"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/admin.css') }}"
    />
  </head>
  <body>
    <header class="header" data-header>
      <div class="container">
        <h1>
          <a href="{{ url_for('admin_dashboard') }}" class="logo"
            >Admin Panel</a
          >
        </h1>

        <div class="user-action-list">
          <button class="theme-toggle" id="theme-toggle" title="Toggle theme">
            <span class="material-symbols-rounded" id="theme-icon"
              >light_mode</span
            >
          </button>
          <div class="header-profile">
            <figure class="profile-avatar">
              <img
                src="{{ url_for('static', filename='images/admin-avatar.jpg') }}"
                alt="Admin"
                width="32"
                height="32"
              />
            </figure>
            <div>
              <p class="profile-title">Admin</p>
            </div>
          </div>
          <button
            class="menu-toggle-btn icon-box"
            data-menu-toggle-btn
            aria-label="Toggle Menu"
          >
            <span class="material-symbols-rounded icon">menu</span>
          </button>
        </div>

        <nav class="navbar">
          <ul class="navbar-list">
            <li>
              <a
                href="{{ url_for('admin_dashboard') }}"
                class="navbar-link {% if request.endpoint == 'admin_dashboard' %}active{% endif %}"
                ><span class="material-symbols-rounded icon">grid_view</span
                ><span>Dashboard</span></a
              >
            </li>
            <li>
              <a
                href="{{ url_for('admin_services') }}"
                class="navbar-link {% if 'service' in request.endpoint %}active{% endif %}"
                ><span class="material-symbols-rounded icon"
                  >design_services</span
                ><span>Services</span></a
              >
            </li>
            <li>
              <a
                href="{{ url_for('admin_features') }}"
                class="navbar-link {% if 'feature' in request.endpoint %}active{% endif %}"
                ><span class="material-symbols-rounded icon">star</span
                ><span>Features</span></a
              >
            </li>
            <li>
              <a
                href="{{ url_for('admin_blog') }}"
                class="navbar-link {% if 'blog' in request.endpoint %}active{% endif %}"
                ><span class="material-symbols-rounded icon">feed</span
                ><span>Blog</span></a
              >
            </li>
            <li>
              <a
                href="{{ url_for('admin_announcements') }}"
                class="navbar-link {% if 'announcement' in request.endpoint %}active{% endif %}"
                ><span class="material-symbols-rounded icon">campaign</span
                ><span>Announcements</span></a
              >
            </li>
            <li>
              <a
                href="{{ url_for('admin_contacts') }}"
                class="navbar-link {% if 'contact' in request.endpoint %}active{% endif %}"
                ><span class="material-symbols-rounded icon">mail</span
                ><span>Contacts</span></a
              >
            </li>
            <li>
              <a
                href="{{ url_for('admin_pages') }}"
                class="navbar-link {% if 'page' in request.endpoint %}active{% endif %}"
                ><span class="material-symbols-rounded icon">article</span
                ><span>Pages</span></a
              >
            </li>
            <li>
              <a
                href="{{ url_for('admin_site_content') }}"
                class="navbar-link {% if 'site_content' in request.endpoint %}active{% endif %}"
                ><span class="material-symbols-rounded icon">web</span
                ><span>Site Content</span></a
              >
            </li>
            <li class="logout-item">
              <a
                href="{{ url_for('admin_logout') }}"
                class="navbar-link logout"
              >
                <span class="material-symbols-rounded icon">logout</span>
                <span>Logout</span>
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <main>
      <article class="container article">
        {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %}
        <ul class="flash-messages">
          {% for category, message in messages %}
          <li class="flash-message flash-{{ category }}">
            <span class="material-symbols-rounded flash-icon">
              {% if category == 'success' %}check_circle{% elif category ==
              'error' %}error{% else %}info{% endif %}
            </span>
            <span class="flash-text">{{ message }}</span>
            <button class="flash-close" onclick="this.parentElement.remove()">
              <span class="material-symbols-rounded">close</span>
            </button>
          </li>
          {% endfor %}
        </ul>
        {% endif %} {% endwith %} {% block content %}{% endblock %}
      </article>
    </main>

    <footer class="footer">
      <div class="container">
        <p class="copyright">
          &copy; 2025 Shramic Community. All Rights Reserved
        </p>
      </div>
    </footer>

    <script>
      "use strict";
      const header = document.querySelector("[data-header]");
      const navToggleBtn = document.querySelector("[data-menu-toggle-btn]");
      navToggleBtn.addEventListener("click", () =>
        header.classList.toggle("active")
      );

      const themeToggle = document.getElementById("theme-toggle");
      const themeIcon = document.getElementById("theme-icon");
      const currentTheme = localStorage.getItem("theme");
      if (currentTheme) {
        document.documentElement.setAttribute("data-theme", currentTheme);
        if (currentTheme === "dark") {
          themeIcon.textContent = "dark_mode";
        } else {
          themeIcon.textContent = "light_mode";
        }
      } else {
        themeIcon.textContent = "light_mode";
      }

      themeToggle.addEventListener("click", () => {
        let theme = document.documentElement.getAttribute("data-theme");
        if (theme === "dark") {
          document.documentElement.removeAttribute("data-theme");
          localStorage.removeItem("theme");
          themeIcon.textContent = "light_mode";
        } else {
          document.documentElement.setAttribute("data-theme", "dark");
          localStorage.setItem("theme", "dark");
          themeIcon.textContent = "dark_mode";
        }
      });

      function confirmDelete(event) {
        if (
          !confirm(
            "Are you sure you want to delete this item? This action cannot be undone."
          )
        ) {
          event.preventDefault();
        }
      }

      // Auto-hide flash messages after 5 seconds
      setTimeout(function () {
        const flashMessages = document.querySelectorAll(".flash-message");
        flashMessages.forEach(function (message) {
          message.style.animation = "slideOut 0.3s ease-out forwards";
          setTimeout(() => message.remove(), 300);
        });
      }, 5000);
    </script>
  </body>
</html>
